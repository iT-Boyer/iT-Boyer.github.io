<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>问答AI: ob-swift 导入第三方库 - 习七</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="iTBoyer"><meta name=description content="博客简介"><meta name=keywords content="swift,iOS,积极主动,以终为始,要事第一,效能平衡"><meta name=generator content="Hugo 0.150.0 with theme even"><link rel=canonical href=https://it-boyer.github.io/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%97%AE%E7%AD%94AIob-swift-%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link href=/sass/main.min.d4d0dce78b3ec6333437bc36540c4749ae9a27ff4ca2d7562da2dbfbf991dde3.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=/css/search.css><link rel=stylesheet href=/css/copy-to-clipboard.css><link rel=stylesheet href=/css/todo.css><meta property="og:url" content="https://it-boyer.github.io/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%97%AE%E7%AD%94AIob-swift-%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/"><meta property="og:site_name" content="习七"><meta property="og:title" content="问答AI: ob-swift 导入第三方库"><meta property="og:description" content="博客简介"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-04-16T02:02:00+08:00"><meta property="article:modified_time" content="2023-05-08T22:28:28+08:00"><meta itemprop=name content="问答AI: ob-swift 导入第三方库"><meta itemprop=description content="博客简介"><meta itemprop=datePublished content="2023-04-16T02:02:00+08:00"><meta itemprop=dateModified content="2023-05-08T22:28:28+08:00"><meta itemprop=wordCount content="1910"><meta itemprop=keywords content=",Inbox"><meta name=twitter:card content="summary"><meta name=twitter:title content="问答AI: ob-swift 导入第三方库"><meta name=twitter:description content="博客简介"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script>(function(){""&&prompt("请输入文章密码")!==""&&(alert("密码错误！"),history.back())})()</script></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>习七</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>主页</li></a><a href=/post/><li class=mobile-menu-item>归档</li></a><a href=/tags/><li class=mobile-menu-item>标签</li></a><a href=/categories/><li class=mobile-menu-item>分类</li></a><a href=/categories/%E5%91%A8%E6%8A%A5/><li class=mobile-menu-item>周报</li></a><a href=/iDocs/><li class=mobile-menu-item>文档</li></a><a href=/authors/itboyer/><li class=mobile-menu-item>关于</li></a><a href=/resume><li class=mobile-menu-item>认识我</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>习七</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>主页</a></li><li class=menu-item><a class=menu-item-link href=/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=/categories/%E5%91%A8%E6%8A%A5/>周报</a></li><li class=menu-item><a class=menu-item-link href=/iDocs/>文档</a></li><li class=menu-item><a class=menu-item-link href=/authors/itboyer/>关于</a></li><li class=menu-item><a class=menu-item-link href=/resume>认识我</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>问答AI: ob-swift 导入第三方库</h1><div class=post-meta><span class=post-time>2023-04-16</span><div class=post-category><a href=/categories/Inbox/>Inbox</a></div><span class=more-meta>约 1910 字 </span><span class=more-meta>预计阅读 4 分钟 </span><span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次阅读 </span><span class=more-meta>by
<a href=/authors/iTBoyer>iTBoyer</a></span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#需要验证的问题><span class="org-todo todo TODO">TODO</span> 需要验证的问题</a></li><li><a href=#使用-session-引入块环境>使用 :session 引入块环境</a><ul><li><a href=#优化-ob-swift-session-对话脚本问题>优化 ob-swift session 对话脚本问题</a></li><li><a href=#设置-ob-swift-默认-session-名称-session-swift-repl-swift-repl>设置 ob-swift 默认 session 名称:session “<strong>Swift REPL [swift repl]</strong>”</a></li><li><a href=#处理-outdata-字符串-截取-之后的字符串-使用elisp-实现上述功能-举例说明>处理 outdata 字符串，截取 //&mdash;- 之后的字符串，使用elisp 实现上述功能，举例说明</a></li></ul></li><li><a href=#通过-noweb-传值>通过 :noweb 传值</a></li><li><a href=#通过-var-跨源块传递值>通过 :var 跨源块传递值</a></li><li><a href=#通过-include-引用块环境>通过 :include 引用块环境</a></li><li><a href=#自定义-ob-babel>自定义 ob-babel</a><ul><li><a href=#自定义-ob-swift><span class="org-todo todo TODO">TODO</span> 自定义 ob-swift</a></li><li><a href=#自定义ai-ob-slack-对话模块><span class="org-todo todo TODO">TODO</span> 自定义AI ob-slack 对话模块</a></li></ul></li></ul></nav></div></div><div class=post-outdated><div class=warn><p>【注意】最后更新于 <span class=timeago datetime=2023-05-08T22:28:28 title="May 8, 2023">May 8, 2023</span>，文中内容可能已过时，请谨慎使用。</p></div></div><div class=post-content><h2 id=需要验证的问题><span class="org-todo todo TODO">TODO</span> 需要验证的问题</h2><p>解决的问题 swift-mode build spm 项目，在repl 中debug spm 代码 ob-swift 默认使用 swift repl buffer ，达到共用 session 的效果 ob-swift 执行命令设置为 swift repl 需要验证的问题：ob-swift 是否和 swift-mode repl 共用 session</p><ol><li>先编译 UnitDemo 项目 ，新建对话 进入 repl session</li><li>在 ob-swift 中使用默认的 session ，尝试 import UnitDemo 相关库。</li><li>整理 include 方法实现跨块的代码共享参数环境 <a href=https://xenodium.com/emacs-chaining-org-babel-blocks/>Emacs: chaining org babel blocks</a> <a href=https://www.reddit.com/r/emacs/comments/jjbrvw/chaining_org_babel_blocks/>Reddit - Dive into anything</a></li><li>整理 noweb 的用法，共享变量 <a href=https://orgmode.org/manual/Noweb-Reference-Syntax.html>Noweb Reference Syntax (The Org Manual)</a></li><li>整理 ob-babel 官方文档中的 header 参数的应用 <a href=https://orgmode.org/manual/Using-Header-Arguments.html>Using Header Arguments (The Org Manual)</a></li><li>swift-mode 使用自己的库</li></ol><h2 id=使用-session-引入块环境>使用 :session 引入块环境</h2><p>:PROPERTIES: nil:END:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>let</span> <span class=nv>x</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nv>y</span> <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nv>z</span> <span class=p>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
</span></span><span class=line><span class=cl><span class=bp>print</span><span class=p>(</span><span class=n>z</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>let</span> <span class=nv>a</span> <span class=p>=</span> <span class=mi>1</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=bp>print</span><span class=p>(</span><span class=s>&#34;test1----</span><span class=si>\(</span><span class=n>a</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=bp>print</span><span class=p>(</span><span class=s>&#34;test2----</span><span class=si>\(</span><span class=n>a</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=bp>print</span><span class=p>(</span><span class=s>&#34;test3----</span><span class=si>\(</span><span class=n>a</span><span class=si>)</span><span class=s>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=优化-ob-swift-session-对话脚本问题>优化 ob-swift session 对话脚本问题</h3><p>熟悉几个命令 start-process call-interactively</p><ol><li>源库中使用使用 process</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl><span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>obname</span> <span class=s>&#34;*ob-swift-xx*&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>start-process</span> <span class=nv>obname</span> <span class=nv>obname</span> <span class=s>&#34;sudo swift repl&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>obname</span> <span class=s>&#34;*ob-swift-xx*&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>process-send-string</span> <span class=nv>obname</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;%s\n\&#34;%s\&#34;\n&#34;</span> <span class=s>&#34;print(\&#34;hello\&#34;)&#34;</span> <span class=nv>ob-swift-eoe</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>accept-process-output</span> <span class=p>(</span><span class=nf>get-process</span> <span class=nv>obname</span><span class=p>)</span> <span class=no>nil</span> <span class=no>nil</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ol><li>fork库中 使用 swift-mode 方法 run-swift</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl><span class=p>(</span><span class=nb>save-window-excursion</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>obname</span> <span class=s>&#34;*swift-repl*&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setq</span> <span class=nv>swift-mode:repl-buffer</span> <span class=nv>obname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>call-interactively</span> <span class=ss>&#39;run-swift</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>get-buffer</span> <span class=nv>obname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>(call-interactively &lsquo;run-swift) 方法执行之后，仍提示 no process 是什么原因</p><p>这可能是因为 <code>run-swift</code> 方法未能正确启动 Swift 进程。你可以尝试重新启动 Emacs 或检查你是否正确配置了 Swift 环境。你也可以尝试手动启动 Swift 进程以确保它能正常工作。</p><p>如何解决这个问题：ob-swift&ndash;eval-in-repl: Buffer <strong>ob-swift-my-session</strong> has no process</p><h3 id=设置-ob-swift-默认-session-名称-session-swift-repl-swift-repl>设置 ob-swift 默认 session 名称:session &ldquo;<strong>Swift REPL [swift repl]</strong>&rdquo;</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=bp>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=使用-ob-swift-引入第三方库-借助swift-mode-debug-swift-module方法实现>使用 ob-swift 引入第三方库:借助swift-mode:debug-swift-module方法实现</h4><p>借助 swift-mode:debug-swift-module 方法实现,该方法会新建进程和 swift-repl buffer 它名通过 swift repl 执行的命令命名，例如：`swift repl -i &mldr;` 查看进程列表： list-process 查看buffer： spc b B 通过这两个方法可以找到 repl buffer 的名称。</p><p>然后，设置 ob-swift 的 `：session` 的名称 <code>*Swift REPL [swift repl -i ...]*</code> ,这样，在运行代码块的时候，就可以和 swift-mode 共用环境。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=kd>import</span> <span class=nc>UnitLib</span>
</span></span></code></pre></td></tr></table></div></div><p>这样就可以在代码块中调用第三方库了。</p><h3 id=处理-outdata-字符串-截取-之后的字符串-使用elisp-实现上述功能-举例说明>处理 outdata 字符串，截取 //&mdash;- 之后的字符串，使用elisp 实现上述功能，举例说明</h3><p>可以使用 <code>split-string</code> 函数将 <code>outdata</code> 字符串分割成多个行，并使用 <code>nthcdr</code> 和 <code>member</code> 函数来找到 <code>//----</code> 之后的所有行。以下是一个示例实现：</p><p>在elisp 中通过在指定的字符串分割原始字符串，并得到最后部分，举例说明</p><p>可以使用=split-string=函数来分割字符串。例如，要在字符串"/usr/local/bin"中分割出最后一个部分"bin"，可以使用如下代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>outdata</span> <span class=s>&#34;test2----\(a)\nprint(\&#34;test3----\&#34;)\n//----\ntest1----1\n326&gt; test2----1\n327&gt; test3----1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>car</span> <span class=p>(</span><span class=nv>last</span> <span class=p>(</span><span class=nv>split-string</span> <span class=nv>outdata</span> <span class=s>&#34;//----\n&#34;</span><span class=p>)))</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>test1----1
</span></span><span class=line><span class=cl>326&gt; test2----1
</span></span><span class=line><span class=cl>327&gt; test3----1
</span></span></code></pre></td></tr></table></div></div><p>其中， <code>(split-string "/usr/local/bin" "/")</code> 将字符串 &ldquo;<em>usr/local/bin&rdquo; 以 &ldquo;</em>&rdquo; 为分隔符分割成一个字符串列表， <code>last</code> 函数返回列表中的最后一个元素，然后用 <code>car</code> 函数取出这个元素的值。</p><h2 id=通过-noweb-传值>通过 :noweb 传值</h2><p><a id=code-snippet--c1></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>message1</span> <span class=o>=</span> <span class=s>&#34;hello from block 1&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><a id=code-snippet--c2></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>message2</span> <span class=o>=</span> <span class=s>&#34;hi from block 2&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=o>&lt;&lt;</span><span class=n>c1</span><span class=o>&gt;&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;&lt;</span><span class=n>c2</span><span class=o>&gt;&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>message1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>message2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>hello from block 1
</span></span><span class=line><span class=cl>hi from block 2
</span></span></code></pre></td></tr></table></div></div><h2 id=通过-var-跨源块传递值>通过 :var 跨源块传递值</h2><ol><li>第一步 声明块变量: <code>,#+name: c_hello</code></li><li>第二步 在块中引用： <code>:var data=块变量</code></li></ol><p><a id=code-snippet--c-hello></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl>  <span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  <span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;hello C&#34;</span><span class=p>);</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>  <span class=nb>echo</span> hello from sh <span class=nv>$data</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>hello from sh hello C
</span></span></code></pre></td></tr></table></div></div><h2 id=通过-include-引用块环境>通过 :include 引用块环境</h2><ol><li>第一步 重写 <code>adviced:org-babel-execute-src-block</code></li><li>第二步 声明块变量名： <code>,#+name: b1</code></li><li>第三步 引入块环境： <code>:include 块变量名</code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl>   <span class=p>(</span><span class=nb>defun</span> <span class=nv>adviced:org-babel-execute-src-block</span> <span class=p>(</span><span class=kp>&amp;optional</span> <span class=nv>orig-fun</span> <span class=nv>arg</span> <span class=nv>info</span> <span class=nv>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>body</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>1</span> <span class=nv>info</span><span class=p>))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>include</span> <span class=p>(</span><span class=nf>assoc</span> <span class=nb>:include</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>2</span> <span class=nv>info</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=nv>named-blocks</span> <span class=p>(</span><span class=nv>org-element-map</span> <span class=p>(</span><span class=nv>org-element-parse-buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                             <span class=ss>&#39;src-block</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                                          <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nv>org-element-property</span> <span class=nb>:name</span> <span class=nv>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                                            <span class=p>(</span><span class=nf>cons</span> <span class=p>(</span><span class=nv>org-element-property</span> <span class=nb>:name</span> <span class=nv>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                                                  <span class=nv>item</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nb>while</span> <span class=nv>include</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=ne>user-error</span> <span class=s>&#34;:include without value&#34;</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nf>assoc</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)</span> <span class=nv>named-blocks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>           <span class=p>(</span><span class=ne>user-error</span> <span class=s>&#34;source block \&#34;%s\&#34; not found&#34;</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nb>setq</span> <span class=nv>body</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nv>org-element-property</span> <span class=nb>:value</span> <span class=p>(</span><span class=nf>cdr</span> <span class=p>(</span><span class=nf>assoc</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)</span> <span class=nv>named-blocks</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>                            <span class=nv>body</span><span class=p>))</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nb>setf</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>1</span> <span class=nv>info</span><span class=p>)</span> <span class=nv>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nb>setq</span> <span class=nv>include</span> <span class=p>(</span><span class=nf>assoc</span> <span class=nb>:include</span>
</span></span><span class=line><span class=cl>                              <span class=p>(</span><span class=nv>org-babel-parse-header-arguments</span>
</span></span><span class=line><span class=cl>                               <span class=p>(</span><span class=nv>org-element-property</span> <span class=nb>:parameters</span> <span class=p>(</span><span class=nf>cdr</span> <span class=p>(</span><span class=nf>assoc</span> <span class=p>(</span><span class=nf>cdr</span> <span class=nv>include</span><span class=p>)</span> <span class=nv>named-blocks</span><span class=p>)))))))</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nf>funcall</span> <span class=nv>orig-fun</span> <span class=nv>arg</span> <span class=nv>info</span> <span class=nv>params</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=c1>;; 这段代码使用 =advice-add= 函数，在 =org-babel-execute-src-block= 周围添加了一个名为 =adviced:org-babel-execute-src-block= 的 advice。这意味着在执行 =org-babel-execute-src-block= 时，将首先执行此 advice 中定义的代码，然后再执行原始函数中的代码。</span>
</span></span><span class=line><span class=cl>   <span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;org-babel-execute-src-block</span> <span class=nb>:around</span> <span class=ss>&#39;adviced:org-babel-execute-src-block</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=nv>解释一下这段代码</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><p><a id=code-snippet--b1></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl>  <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>message1</span> <span class=o>=</span> <span class=s>&#34;hello from block 1&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><a id=code-snippet--b2></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl>  <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span> <span class=n>message2</span> <span class=o>=</span> <span class=s>&#34;hello from block 2&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl>  <span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  <span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>message1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>message2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>hello from block 1
</span></span><span class=line><span class=cl>hello from block 2
</span></span></code></pre></td></tr></table></div></div><p>在运行代码时提示错误：use of undeclared identifier &lsquo;message1&rsquo; printf("%s\n", message1);</p><p>这是因为 <code>message1</code> 的作用域仅限于 <code>b1</code> 块中，无法在 <code>main</code> 函数内部访问。可以将 <code>message1</code> 定义成全局变量或使用 <code>#include</code> 指令将 <code>b1</code> 块中的代码直接包含到 <code>main</code> 函数中。例如，将 <code>b1</code> 的代码直接放到 <code>main</code> 函数上方，或者在 <code>main</code> 函数中使用 <code>#include "file.org::b1"</code> 来包含 <code>b1</code> 块中的代码。</p><h2 id=自定义-ob-babel>自定义 ob-babel</h2><h3 id=自定义-ob-swift><span class="org-todo todo TODO">TODO</span> 自定义 ob-swift</h3><p><a href=https://github.com/NicholasTD07/dotfiles/blob/71adbedf80d4985a14c674f14c386dc8232da824/.spacemacs.d/configuration.org#org-babel-executeswift>dotfiles/configuration.org at 71adbedf80d4985a14c674f14c386dc8232da824 · Nich&mldr;</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=p>(</span><span class=n>defun</span> <span class=n>org</span><span class=o>-</span><span class=n>babel</span><span class=o>-</span><span class=n>execute</span><span class=p>:</span><span class=n>swift</span> <span class=p>(</span><span class=n>body</span> <span class=n>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Execute a block of Swift code with org-babel.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=n>message</span> <span class=s>&#34;executing Swift source code block&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=n>ob</span><span class=o>-</span><span class=n>swift</span><span class=o>--</span><span class=n>eval</span> <span class=n>body</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=n>defun</span> <span class=n>ob</span><span class=o>-</span><span class=n>swift</span><span class=o>--</span><span class=n>eval</span> <span class=p>(</span><span class=n>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=n>with</span><span class=o>-</span><span class=n>temp</span><span class=o>-</span><span class=n>buffer</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=bp>insert</span> <span class=n>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=n>shell</span><span class=o>-</span><span class=n>command</span><span class=o>-</span><span class=n>on</span><span class=o>-</span><span class=n>region</span> <span class=p>(</span><span class=n>point</span><span class=o>-</span><span class=bp>min</span><span class=p>)</span> <span class=p>(</span><span class=n>point</span><span class=o>-</span><span class=bp>max</span><span class=p>)</span> <span class=s>&#34;swift -&#34;</span> <span class=kc>nil</span> <span class=err>&#39;</span><span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=n>buffer</span><span class=o>-</span><span class=n>string</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=n>provide</span> <span class=err>&#39;</span><span class=n>ob</span><span class=o>-</span><span class=n>swift</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>这是一个定义了 `org-babel-execute:swift` 函数的 Emacs Lisp 代码段，用于执行 Swift 代码块。下面是代码的注释说明：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl><span class=c1>;; 定义一个名为 `org-babel-execute:swift` 的函数</span>
</span></span><span class=line><span class=cl><span class=c1>;; 该函数接受两个参数，`body` 表示代码块中的代码字符串，</span>
</span></span><span class=line><span class=cl><span class=c1>;; `params` 包含了代码块的参数列表和其他信息</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>org-babel-execute:swift</span> <span class=p>(</span><span class=nv>body</span> <span class=nv>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; 获取参数列表中 `:session` 参数的值，即 REPL 会话名称</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>session</span> <span class=p>(</span><span class=nf>cdr</span> <span class=p>(</span><span class=nf>assoc</span> <span class=nb>:session</span> <span class=nv>params</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; 如果 `:session` 参数的值为 &#34;none&#34;，表示不使用 REPL，</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; 直接调用 `ob-swift--eval` 函数执行代码</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>string=</span> <span class=s>&#34;none&#34;</span> <span class=nv>session</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>ob-swift--eval</span> <span class=nv>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 否则使用 `ob-swift--eval-in-repl` 函数在 REPL 中执行代码</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>ob-swift--eval-in-repl</span> <span class=nv>session</span> <span class=nv>body</span><span class=p>)))))</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=自定义ai-ob-slack-对话模块><span class="org-todo todo TODO">TODO</span> 自定义AI ob-slack 对话模块</h3><p>新建模块在 emacs-slack 基础上，新增 ob-babel 功能，例如在org-mode 中和指定的人聊天</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elisp data-lang=elisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>org-babel-execute:slack</span> <span class=p>(</span><span class=nv>body</span> <span class=nv>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Execute Slack message BODY with PARAMS.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>user</span> <span class=p>(</span><span class=nf>cdr</span> <span class=p>(</span><span class=nf>assoc</span> <span class=nb>:user</span> <span class=nv>params</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>         <span class=p>(</span><span class=nf>buffer-name</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;*Slack - %s*&#34;</span> <span class=nv>user</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>if</span> <span class=nv>user</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nv>slack-user-buffer</span> <span class=nv>user</span><span class=p>)</span> <span class=c1>; Enter private buffer with user</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>slack-buffer</span><span class=p>))</span> <span class=c1>; Enter default Slack buffer</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>insert</span> <span class=nv>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>slack-send-message-or-comment</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>slack-read-mode</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>org-babel-default-header-args:slack</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((</span><span class=nb>:user</span> <span class=o>.</span> <span class=s>&#34;创客屋 : Claude&#34;</span><span class=p>)</span> <span class=c1>; Default Slack user</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>:session</span> <span class=o>.</span> <span class=s>&#34;none&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>:results</span> <span class=o>.</span> <span class=s>&#34;none&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Default header arguments for slack blocks.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-babel-exec-map</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;slack&#34;</span> <span class=o>.</span> <span class=nv>org-babel-execute:slack</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-babel-prep-session-alist</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>slack</span> <span class=o>.</span> <span class=nv>org-babel-prep-session:slack</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Hi there! How&#39;s it going?
</span></span></code></pre></td></tr></table></div></div></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>iTBoyer</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2023-05-08</span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=/img/reward/weixin.jpg>
<span>微信打赏</span>
</label><label class=qr-code-image for=reward><img class=image src=/img/reward/zhifubao.jpg>
<span>支付宝打赏</span></label></div></div><footer class=post-footer><nav class=post-nav><a class=prev href=/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%97%AE%E7%AD%94AI-snippet/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">问答AI emacs snippet 用法</span>
<span class="prev-text nav-mobile">上一篇</span>
</a><a class=next href=/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%97%AE%E7%AD%94AIswift-%E4%B8%AD-String-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E6%9C%80%E5%90%8E%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6/><span class="next-text nav-default">问答AI:swift 中 String 字符串如何删除最后几个字符</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js crossorigin=anonymous></script><script type=text/javascript>var gitalk=new Gitalk({id:"2023-04-16 02:02:00 +0800 +0800",title:"问答AI: ob-swift 导入第三方库",clientID:"d46ea301857e36a08319",clientSecret:"9da00f1f475c4166b96fbe157d0afdbd64cc613c",repo:"it-boyer.github.io",owner:"it-boyer",admin:["it-boyer"],body:decodeURI(location.href)});gitalk.render("gitalk-container")</script><noscript>Please enable JavaScript to view the <a href=https://github.com/gitalk/gitalk>comments powered by gitalk.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:iTBoyer@qq.com class="iconfont icon-email" title=email></a><a href=https://github.com/it-boyer class="iconfont icon-github" title=github></a><a href=http://weibo.com/1791281385 class="iconfont icon-weibo" title=weibo></a><a href=http://www.zhihu.com/people/boyers class="iconfont icon-zhihu" title=zhihu></a><a href=http://douban.com/people/boyers class="iconfont icon-douban" title=douban></a><a href=https://space.bilibili.com/67083417 class="iconfont icon-bilibili" title=bilibili></a></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span><span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量 <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次
</span><span class=division>|</span> <span id=busuanzi_container_site_uv>本站总访客数 <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span> 人</span></div><span class=copyright-year>&copy; 2017 - 2025<span class=heart><i class="iconfont icon-heart"></i></span><span>iTBoyer</span></span></div><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><script src=/js/copy-to-clipboard.js></script></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="zh-cn".replace(/-/g,"_").replace(/_(.*)/,function(e,t){return e.replace(t,t.toUpperCase())});timeago().render(document.querySelectorAll(".timeago"),languageCode),timeago.cancel()</script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script></body></html><style>#fastSearch{visibility:hidden;position:absolute;left:10px;top:10px;display:inline-block;width:320px;margin:0 10px 0 0;padding:0}#fastSearch input{padding:4px;width:100%;height:31px;font-size:1.6em;color:#222129;font-weight:700;background-color:gray;border-radius:3px 3px 0 0;border:none;outline:none;text-align:left;display:inline-block}#searchResults li{list-style:none;margin-left:0;background-color:gray;border-bottom:1px dotted #000}#searchResults li .title{font-size:1.1em;margin:0;display:inline-block}#searchResults{visibility:inherit;display:inline-block;width:320px;margin:0;max-height:calc(100vh - 120px);overflow:hidden}#searchResults a{text-decoration:none!important;padding:10px;display:inline-block;width:100%}#searchResults a:hover,#searchResults a:focus{outline:0;background-color:#666;color:#fff}#search-btn{position:absolute;top:10px;right:20px;font-size:24px}@media(max-width:683px){#fastSearch,#search-btn{top:64px}}</style><div id=fastSearch><input id=searchInput tabindex=0><ul id=searchResults></ul></div><script src=/js/fuse.js></script><script src=/js/fastsearch.js></script>