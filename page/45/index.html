<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>习七</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="iTBoyer"><meta name=description content="不物喜,不己悲;善假物,易参行."><meta name=keywords content="swift,iOS,积极主动,以终为始,要事第一,效能平衡"><meta name=generator content="Hugo 0.150.0 with theme even"><link rel=canonical href=https://it-boyer.github.io/><link href=https://it-boyer.github.io/index.xml rel=alternate type=application/rss+xml title=习七><link href=https://it-boyer.github.io/index.xml rel=feed type=application/rss+xml title=习七><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link href=/sass/main.min.d4d0dce78b3ec6333437bc36540c4749ae9a27ff4ca2d7562da2dbfbf991dde3.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=/css/search.css><link rel=stylesheet href=/css/copy-to-clipboard.css><link rel=stylesheet href=/css/todo.css><meta property="og:url" content="https://it-boyer.github.io/"><meta property="og:site_name" content="习七"><meta property="og:title" content="习七"><meta property="og:description" content="不物喜,不己悲;善假物,易参行."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><meta itemprop=name content="习七"><meta itemprop=description content="不物喜,不己悲;善假物,易参行."><meta itemprop=datePublished content="2024-04-02T10:16:00+08:00"><meta itemprop=dateModified content="2024-04-02T10:16:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="习七"><meta name=twitter:description content="不物喜,不己悲;善假物,易参行."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script>(function(){""&&prompt("请输入文章密码")!==""&&(alert("密码错误！"),history.back())})()</script></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>习七</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>主页</li></a><a href=/post/><li class=mobile-menu-item>归档</li></a><a href=/tags/><li class=mobile-menu-item>标签</li></a><a href=/categories/><li class=mobile-menu-item>分类</li></a><a href=/categories/%E5%91%A8%E6%8A%A5/><li class=mobile-menu-item>周报</li></a><a href=/iDocs/><li class=mobile-menu-item>文档</li></a><a href=/authors/itboyer/><li class=mobile-menu-item>关于</li></a><a href=/resume><li class=mobile-menu-item>认识我</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>习七</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>主页</a></li><li class=menu-item><a class=menu-item-link href=/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=/categories/%E5%91%A8%E6%8A%A5/>周报</a></li><li class=menu-item><a class=menu-item-link href=/iDocs/>文档</a></li><li class=menu-item><a class=menu-item-link href=/authors/itboyer/>关于</a></li><li class=menu-item><a class=menu-item-link href=/resume>认识我</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/UI/TextKit%E4%B9%8B%E4%BE%BF%E7%AC%BA%E5%AE%9E%E6%88%98/>TextKit之便笺实战</a></h1><div class=post-meta><span class=post-time>2014-07-03</span><div class=post-category><a href=/categories/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/>项目总结</a></div><span class=more-meta>约 9488 字 </span><span class=more-meta>预计阅读 19 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h2>便笺练习功能点:</h2><p>通过实现以下特效，练习并掌握布局管理器（layout manger），文本容器（text containers）和文本存储器（text storage）等用法。</p><ul><li>动态样式（Dynamic type）</li><li>凸版印刷效果（Letterpress effects）</li><li>环绕路径（Exclusion paths）</li><li>动态文本格式及存储（Dynamic text formatting and storage）</li></ul><p>这个应用中我们将实现回流文本，字体大小的动态变换，以及闪回文本等效果。
效果图:<br><img src=/images/bianqian.png alt=image><br>App开始运行后自动生成一组便笺实例并利用<code>tableViewController</code>显示出来。<code>Storyboards</code>和<code>segues</code>会将被选中的单元格所对应的便笺内容显示出来以供用户编辑。
项目开发包：<a href=http://cdn4.raywenderlich.com/wp-content/uploads/2013/09/TextKitNotepad-starter.zip>Notepad.zip</a></p><h2>动态样式</h2><p><code>动态样式（Dynamic type）</code>是iOS 7里面变化最大的特性之一; 它使得app可以遵从用户选择的字体大小和粗细。
选择 <strong>通用->文字大小</strong> 或 <strong>通用->辅助功能</strong> 来查看app中的字体设置。</p><p><img src=/images/UserTextPreferences.png alt=image><br>iOS 7 支持通过<code>粗体</code>、<code>设置字体大小</code>等方式提高支持动态文本的应用的易读性。
例如**<code>UIFont</code>**新增的一个方法： <strong><code>preferredFontForTextStyle</code></strong> 用来根据用户对字体大小的设置来自动制定字体样式。<br>下面表格中是六种可用字体样式的示例：<br><img src=/images/TextStyles.png alt=image><br>最左边一列是最小字体；中间一列是最大字体；最右边一列是粗体效果。</p><h3>使用系统动态字体样式</h3><p>使用动态文本，是通过给<code>文本字体</code>设置字体样式<strong>style</strong>而不是指定具体的<code>字体名称</code>和<code>大小</code>。这样，系统会在运行时自动根据这一样式以及用户的字体大小设置来选择使用合适的字体。</p><h4><code>preferredFontForTextStyle:</code>方法设置字体样式</h4><ol><li>打开 <code>NoteEditorViewController.m/swift</code> 在<code>viewDidLoad：</code>方法实现的最后面加入以下代码：
{%codeblock lang:objc%}
self.textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];
{%endcodeblock%}
{% codeblock lang:swift %}
self.textView.font = UIFont.preferredFont(forTextStyle: .body)
{% endcodeblock %}</li><li>打开 <code>NotesListViewController.m/swift</code> 在 <code>tableView:cellForRowAtIndexPath:</code> 方法中增加如下代码:
{%codeblock lang:objc%}
cell.textLabel.font = [UIFont preferredFontForTextStyle:UIFontTextStyleHeadline];
{%endcodeblock%}
{% codeblock lang:swift %}
cell.textLabel?.font = UIFont.preferredFont(forTextStyle: .headline)
{% endcodeblock %}
上面两行代码都用到了新版iOS的字体样式.</li></ol><blockquote><p>字体样式：通过语义法命名字体，例如 <code>UIFontTextStyleSubHeadline</code>, 可以避免在代码里每一处都指定具体的字体名称和样式， 而且确保app能对用户的字体大小设置做出恰当的回应。</p></blockquote><h4>APP响应用户字体设置</h4><ol><li>设置系统字体
返回到<strong>通用->文字大小</strong>重新修改字体设置.
再运行App, <strong>Note</strong>页面的文字大小是当前设定的字体大小；前后截屏对比,分辨率小了一半。<br><img src=/images/NotepadWithDynamicType.png alt=image></li><li>设置系统字体生效
当我们返回到<strong>通用->文字大小</strong>重新修改字体设置. 再打开<strong>Note</strong>页面, 会发现app并没有<strong>立即</strong>对字体设置的变化做出相应反应。</li></ol><h5>监听系统通知：实现APP响应用户字体设置</h5><p>当用户修改了他们的字体大小设置之后，这一样式对应的字体并不会自动更新，必须重新请求才能获取新的值。用户设置变化后，<code>preferredFontForTextStyle:</code>方法返回的字体也会变化。</p><ol><li>添加监听系统通知<code>UIContentSizeCategoryDidChangeNotification</code>通知APP响应用户字体设置的变化
打开 <code>NoteEditorViewController.m</code> 并在 <code>viewDidLoad</code> 方法的实现的最后加入以下代码：
{%codeblock lang:objc%}
[[NSNotificationCenter defaultCenter]
addObserver:self
selector:@selector(preferredContentSizeChanged:)
name:UIContentSizeCategoryDidChangeNotification
object:nil];
{%endcodeblock%}
{%codeblock lang:swift%}
//字体变化通知:调用preferredContentSizeChanged:方法
NotificationCenter.default.addObserver(self, selector: #selector(NoteEditorViewController.preferredContentSizeChanged(_:)), name: NSNotification.Name.UIContentSizeCategoryDidChange, object: nil)
{%endcodeblock%}</li><li>添加系统通知响应事件
收到用于指定本类接收字体设定变化的通知后，调用<code>preferredContentSizeChanged:</code>方法
在<code>NoteEditorViewController.m</code>中<code>viewDidLoad</code>方法之后紧接着添加以下方法：
{%codeblock lang:objc%}</li></ol><ul><li>(void)preferredContentSizeChanged:(NSNotification *)notification
{
self.textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];
}
{%endcodeblock%}
{%codeblock lang:swift %}
//字体变化通知时调用
func preferredContentSizeChanged(_ notification:NSNotification)
{
self.textView.font = UIFont.preferredFont(forTextStyle: .body)
}
{%endcodeblock%}
这一方法作用是根据新的字体设置来设定<code>textView</code>中的字体。<br>Build并运行app，修改字体大小设置，Note页面就可以即时更新字体大小了。</li></ul></div><div class=read-more><a href=/post/old/iOS/UI/TextKit%E4%B9%8B%E4%BE%BF%E7%AC%BA%E5%AE%9E%E6%88%98/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/iOSDocumentInteraction%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/>iOS Document Interaction 编程指南</a></h1><div class=post-meta><span class=post-time>2014-07-01</span><div class=post-category><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>学习笔记</a></div><span class=more-meta>约 4044 字 </span><span class=more-meta>预计阅读 9 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h4>关于 Document Interaction</h4><p>iOS支持在你的app中通过调用其他app来预览和显示文档。iOS还支持文件关联，允许其他app调用你的app打开文件。这些技术包括了UIKit中提供的<a href=https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html>UIDocumentInteractionController</a>类，以及<a href=https://developer.apple.com/library/ios/documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/_index.html>Quick Look</a>框架。</p><ul><li>######预览文档和呈现选项菜单<br>如果app需要打开自身并不支持的文件时，就需要使用<strong>UIDocumentInteractionController</strong>。一个<strong>document interaction controller</strong>通过<strong>Quick Look框架</strong>判断文档是否能被另一个app打开和预览。也就是说，app可以通过<strong>documentinteraction controller</strong>提供一些支持打开该文件方式的菜单。</li></ul><p>具体实现需要以下步骤：</p><ul><li><ul><li>需要通过其他APP打开的文件，来实例化<code>UIDocumentInteractionController</code>实例对象。</li></ul></li><li><ul><li>在自己的APP UI中提供一个代表这种文件的图像标（一般显示文件名或者图标）。</li></ul></li><li><ul><li>用户交互，如触摸这个控件，则调用<code>documentinteractioncontroller</code>对象。</li></ul></li></ul><p>三种交互界面:
1. 预览文件的内容。
2. 一个包含预览和打开操作的菜单。可以通过实现某些委托方法，向菜单中加入其他操作，比如复制、打印。
3. 一个菜单，仅包含“以其它方式打开”操作。</p><p>同时，<code>documentinteractioncontroller</code>内置了一些手势，必要时可以直接实现它们。</p><ul><li><p>######使用<code>documentinteractioncontroller</code>的场景:<strong>与文件交互的app都可以使用。</strong></p></li><li><ul><li>需要从网络下载文件的APP:<br>例如，email程序需要打开和预览邮件附件。</li></ul></li><li><ul><li>不下载文件的APP:<br>例如，APP需要支持文件共享（参考“File-Sharing Support” in <a href=https://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007898>iOS Technology Overview</a>), 即可以对同步到app Documents/Shared目录下的文件使用<code>documentinteractioncontroller</code>。</li></ul></li></ul></div><div class=read-more><a href=/post/old/iOS/iOSDocumentInteraction%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/%E8%B0%83%E8%AF%95/instrument%E4%B9%8BZombie%E5%B7%A5%E5%85%B7/>instrument之Zombie工具</a></h1><div class=post-meta><span class=post-time>2014-07-01</span><div class=post-category><a href=/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/>解决方案</a></div><span class=more-meta>约 588 字 </span><span class=more-meta>预计阅读 2 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><p>Zombie:针对<strong>僵尸对象</strong>导致应用程序崩溃，即已经<code>deallocated</code>的对象，它们的<code>retainCount</code>计数器已经为0，通过正常的手段是无法在<code>debug</code>中跟踪和观察到的。</p><p>如果你开启了 <code>Zombie Enabled</code> ，则当 Zombie 问题出现时，控制台会输出 Zombie 对象的地址，且程序会在此处产生断点：</p><pre><code> -[CALayer retainCount]: message sent to deallocated instance &lt;memoryaddress&gt;
</code></pre></div><div class=read-more><a href=/post/old/%E8%B0%83%E8%AF%95/instrument%E4%B9%8BZombie%E5%B7%A5%E5%85%B7/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/UIDevice%E7%B1%BB%E4%BB%8B%E7%BB%8D/>UIDevice类介绍</a></h1><div class=post-meta><span class=post-time>2014-06-17</span><div class=post-category><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>学习笔记</a></div><span class=more-meta>约 818 字 </span><span class=more-meta>预计阅读 2 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h3>UIDevice.h</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-objc data-lang=objc><span class=line><span class=cl><span class=p>+</span> <span class=p>(</span><span class=n>UIDevice</span> <span class=o>*</span><span class=p>)</span><span class=nf>currentDevice</span><span class=p>;</span> 		  <span class=c1>// 获取当前设备
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>NSString</span>    <span class=o>*</span><span class=n>name</span><span class=p>;</span>               	  <span class=c1>// e.g. &#34;My iPhone&#34;  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>NSString</span>    <span class=o>*</span><span class=n>model</span><span class=p>;</span>              	  <span class=c1>// e.g. @&#34;iPhone&#34;, @&#34;iPod touch&#34;  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>NSString</span>    <span class=o>*</span><span class=n>localizedModel</span><span class=p>;</span>     	  <span class=c1>// localized version of model  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>NSString</span>    <span class=o>*</span><span class=n>systemName</span><span class=p>;</span>     		  <span class=c1>// e.g. @&#34;iOS&#34;  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>NSString</span>    <span class=o>*</span><span class=n>systemVersion</span><span class=p>;</span>   	  <span class=c1>// e.g. @&#34;4.0&#34;  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>UIDeviceOrientation</span> <span class=n>orientation</span><span class=p>;</span>    <span class=c1>//除非正在生成设备方向的通知，否则返回UIDeviceOrientationUnknown  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>NSUUID</span> <span class=o>*</span><span class=n>identifierForVendor</span>         <span class=c1>//可用于唯一标识该设备，同一供应商不同应用具有相同的UUID
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-objc data-lang=objc><span class=line><span class=cl>    <span class=n>UIDeviceOrientationUnknown</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>UIDeviceOrientationPortrait</span><span class=p>,</span>                    <span class=c1>// 竖向，头向上
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>UIDeviceOrientationPortraitUpsideDown</span><span class=p>,</span>  		<span class=c1>// 竖向，头向下
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>UIDeviceOrientationLandscapeLeft</span><span class=p>,</span>         		<span class=c1>// 横向，头向左
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>UIDeviceOrientationLandscapeRight</span><span class=p>,</span>       		<span class=c1>// 横向，头向右
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>UIDeviceOrientationFaceUp</span><span class=p>,</span>                  	<span class=c1>// 平放，屏幕朝下
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>UIDeviceOrientationFaceDown</span>                	 <span class=c1>// 平放，屏幕朝下
</span></span></span></code></pre></td></tr></table></div></div><p>//使用内置的宏定义的函数，根据<strong>orientation</strong>判断设备方向,返回值类型<strong>BOOL</strong>.<br>{%codeblock lang:java 纵向宏定义,返回YES:纵向%}
#define UIDeviceOrientationIsPortrait(orientation) ((orientation) == UIDeviceOrientationPortrait || (orientation) == UIDeviceOrientationPortraitUpsideDown)
{%endcodeblock %}
{%codeblock lang:java 横向宏定义,返回YES:横向%}
#define UIDeviceOrientationIsLandscape(orientation) ((orientation) == UIDeviceOrientationLandscapeLeft || (orientation) == UIDeviceOrientationLandscapeRight)
{%endcodeblock%}</p></div><div class=read-more><a href=/post/old/iOS/UIDevice%E7%B1%BB%E4%BB%8B%E7%BB%8D/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/UI/IOS7%E6%96%B0%E5%AE%A0TextKit/>IOS7新宠TextKit</a></h1><div class=post-meta><span class=post-time>2014-06-16</span><div class=post-category><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>学习笔记</a></div><span class=more-meta>约 2364 字 </span><span class=more-meta>预计阅读 5 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h2>Text Kit</h2><p><strong><code>Text Kit</code></strong>：是个庞大的framework，继承了<code>Core Text</code>的全部功能，构建了快速、先进的文本排版和渲染引擎，更让开发者们高兴的是，设计者把它封装在了一个面向对象的API中。并且与UIKit框架很好的集成，它让程序能够通过<strong>NSTextStorage</strong>对象存储文本排版和显示文本等主要信息，并支持排版所需要的所有特性，包括字距调整、连写、换行和对齐等。</p><blockquote><p><font size=3>更直观的理解，<strong>UITextView</strong>，<strong>UITextField</strong>、<strong>UILabel</strong>等UIKit控件都已经基于<strong>Text Kit</strong>重新构建，是为UIKit框架提供高质量排版服务而扩展的一些类和协议.<br>例如：NSTextStorage对象，它本身是<strong>NSMutableAttributedString</strong>的子类，支持分批编辑，这就意味着在改变一个范围内的字符样式时，不用整体替换文本内容，就能完成排版效果。其中支持分页文本、文本包装、富文本编辑、交互式文本着色、文本折叠和自定义截取等特性。</font></p></blockquote><p>IOS6之前，想实现一些丰富的文本排版，例如在textView中显示不同样式的文本，或者图片和文字混排等，就需要借助于UIWebView或者深入研究一下<code>Core Text</code>。后来iOS6，增加一个很棒的属性:<code>NSAttributedString</code>，主要用于支持UILabel、UITextField、UITextView等UIKit控件自主排版的功能。很显然，IOS7并没有满足于这一改进，同时推出一款功能更为齐全，易用的<code>Text Kit</code>新宠。<br>在iOS 6中, 用于文本的UIKit控件是基于WebKit和Core Graphics的字符串绘制方法来实现的。如下面层级体系图所示：<br>iOS 7的整体构架要更清晰，所有基于文本的UIKit控件（除了UIWebView）现在都可以使用Text Kit，如下图所示：</p></div><div class=read-more><a href=/post/old/iOS/UI/IOS7%E6%96%B0%E5%AE%A0TextKit/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/IOS7%E7%9A%84%E5%8F%98%E9%9D%A9/>IOS7的变革</a></h1><div class=post-meta><span class=post-time>2014-06-11</span><div class=post-category><a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>学习笔记</a></div><span class=more-meta>约 4221 字 </span><span class=more-meta>预计阅读 9 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h2>性能提高以及被遗弃的功能</h2><h3>新增截屏通知:<code>UIApplicationUserDidTakeScreenshotNotification</code></h3><p>在IOS 7之前，开发者使用了一种**<a href=http://dlj.bz/XflV>很赞的方法</a><strong>，来</strong>拦截<strong>截屏事件的.<br>比如，Snapchat的实现原理: 用户通过</strong>Snapchat**发送的照片将会在数秒内自动被删除，而且在浏览照片时，必须将手指按在屏幕上，否则会立即关闭。然而，在 iOS 6 中，<font color=red><strong>截屏将打断触控操作</strong></font>，开发者就利用这个功能点，在恰当时机捕捉到了截屏事件。</p></div><div class=read-more><a href=/post/old/iOS/IOS7%E7%9A%84%E5%8F%98%E9%9D%A9/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/%E5%9C%A8IOS%E4%B8%AD%E5%83%8FSnapChat%E4%B8%80%E6%A0%B7%E7%9B%91%E6%8E%A7screenshots/>在IOS中像SnapChat一样监控screenshots</a></h1><div class=post-meta><span class=post-time>2014-06-10</span><div class=post-category><a href=/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/>解决方案</a></div><span class=more-meta>约 284 字 </span><span class=more-meta>预计阅读 1 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><p>A <a href=http://stackoverflow.com/questions/2121970/notification-of-or-detecting-screenshot-being-taken/2122117>number</a> of <a href=http://stackoverflow.com/questions/13484516/ios-detection-of-screenshot>Stack</a> <a href=http://stackoverflow.com/questions/10122212/iphone-screenshot>Overflow</a>questions were having issues with this, so I figured I’d explain. From reverse engineering, this is the exact method used by SnapChat, but it’s also pretty much what I’d have done myself.</p><p>The process is pretty simple, and relies on a quirk of iOS: taking a screenshot cancels all touches on the screen. Because of that, anything that you want to protect will require you to have the user to touch the screen to see. If that works for your purposes, the general solution is to simply intercept the touch cancellation, and quickly remove any sensitive information from the screen. If you’re also implementing a screenshot counter, as with SnapChat, you will also need to take into account the other cases when a touch might be cancelled: from a system gesture (Notification Center or the iPad’s multitasking gestures), or by activating other pieces of system UI (the power down menu, or the multitasking switcher).</p></div><div class=read-more><a href=/post/old/iOS/%E5%9C%A8IOS%E4%B8%AD%E5%83%8FSnapChat%E4%B8%80%E6%A0%B7%E7%9B%91%E6%8E%A7screenshots/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/old/iOS/IOS7%E6%88%AA%E5%B1%8F%E9%97%AE%E9%A2%98/>IOS7截屏问题</a></h1><div class=post-meta><span class=post-time>2014-06-10</span><div class=post-category><a href=/categories/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/>解决方案</a></div><span class=more-meta>约 840 字 </span><span class=more-meta>预计阅读 2 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><h3>iOS 7截图最新变化: 不再影响用户其他操作</h3><p>在 iOS 7 中，截图动作已经发生了变化，就如苹果在版本说明中描述的那样：用户截图时，有效点击不会再失效了。这个微小的变化对于多款依赖截屏来提醒用户一些不必要动作的应用来说，具有很重要的意义，比如 Snapchat 和 Facebook Poke。</p></div><div class=read-more><a href=/post/old/iOS/IOS7%E6%88%AA%E5%B1%8F%E9%97%AE%E9%A2%98/ class=read-more-link>阅读更多</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%AA%8C%E8%AF%81ob%E7%BB%98%E5%9B%BE%E5%B7%A5%E5%85%B7%E7%BB%93%E5%90%88%E5%8F%8C%E5%90%91%E9%93%BE%E6%8E%A5%E5%B5%8C%E5%A5%97%E5%92%8CHugo%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7/></a></h1><div class=post-meta><span class=post-time>0001-01-01 </span><span class=more-meta>约 595 字 </span><span class=more-meta>预计阅读 2 分钟 </span><span class=more-meta>by</span></div></header><div class=post-content><div class=post-summary><ul><li><input disabled type=checkbox> +++
title = &ldquo;验证ob绘图工具结合双向链接嵌套和Hugo的兼容性&rdquo;
description = &ldquo;ob中有很不错的插件，可以实现沉浸式编写博客，现在有个绘图工具，尝试使用ob的嵌套图片和md嵌套两种方式，在Hugo中的效果&rdquo;
date = &ldquo;2022-10-20 20:53:13&rdquo;
publishDate = &ldquo;2022-10-20&rdquo;
lastmod = &ldquo;2022-10-20 20:53:13&rdquo;
categories = [&ldquo;日志随笔&rdquo;]
draft = false
authors = [&ldquo;iTBoyer&rdquo;]
+++</li></ul><h3>使用ob语法添加图片预览</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>!\[\[Drawing2022-10-2020.43.21.excalidraw.png\]\]
</span></span></code></pre></td></tr></table></div></div><p><img src=/Excalidraw/Drawing2022-10-2020.43.21.excalidraw.png alt=2022-10-2020.43.21.excalidraw.png></p></div><div class=read-more><a href=/post/%E6%97%A5%E5%BF%97%E9%9A%8F%E7%AC%94/%E9%AA%8C%E8%AF%81ob%E7%BB%98%E5%9B%BE%E5%B7%A5%E5%85%B7%E7%BB%93%E5%90%88%E5%8F%8C%E5%90%91%E9%93%BE%E6%8E%A5%E5%B5%8C%E5%A5%97%E5%92%8CHugo%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7/ class=read-more-link>阅读更多</a></div></div></article></section><nav class=pagination><a class=prev href=/page/44/><i class="iconfont icon-left"></i>
<span class=prev-text>上一页</span></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:iTBoyer@qq.com class="iconfont icon-email" title=email></a><a href=https://github.com/it-boyer class="iconfont icon-github" title=github></a><a href=http://weibo.com/1791281385 class="iconfont icon-weibo" title=weibo></a><a href=http://www.zhihu.com/people/boyers class="iconfont icon-zhihu" title=zhihu></a><a href=http://douban.com/people/boyers class="iconfont icon-douban" title=douban></a><a href=https://space.bilibili.com/67083417 class="iconfont icon-bilibili" title=bilibili></a><link href=https://it-boyer.github.io/index.xml rel=feed type=application/rss+xml class="iconfont icon-rss" title=习七></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span><span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量 <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次
</span><span class=division>|</span> <span id=busuanzi_container_site_uv>本站总访客数 <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span> 人</span></div><span class=copyright-year>&copy; 2017 - 2025<span class=heart><i class="iconfont icon-heart"></i></span><span>iTBoyer</span></span></div><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><script src=/js/copy-to-clipboard.js></script></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="zh-cn".replace(/-/g,"_").replace(/_(.*)/,function(e,t){return e.replace(t,t.toUpperCase())});timeago().render(document.querySelectorAll(".timeago"),languageCode),timeago.cancel()</script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script></body></html><style>#fastSearch{visibility:hidden;position:absolute;left:10px;top:10px;display:inline-block;width:320px;margin:0 10px 0 0;padding:0}#fastSearch input{padding:4px;width:100%;height:31px;font-size:1.6em;color:#222129;font-weight:700;background-color:gray;border-radius:3px 3px 0 0;border:none;outline:none;text-align:left;display:inline-block}#searchResults li{list-style:none;margin-left:0;background-color:gray;border-bottom:1px dotted #000}#searchResults li .title{font-size:1.1em;margin:0;display:inline-block}#searchResults{visibility:inherit;display:inline-block;width:320px;margin:0;max-height:calc(100vh - 120px);overflow:hidden}#searchResults a{text-decoration:none!important;padding:10px;display:inline-block;width:100%}#searchResults a:hover,#searchResults a:focus{outline:0;background-color:#666;color:#fff}#search-btn{position:absolute;top:10px;right:20px;font-size:24px}@media(max-width:683px){#fastSearch,#search-btn{top:64px}}</style><div id=fastSearch><input id=searchInput tabindex=0><ul id=searchResults></ul></div><script src=/js/fuse.js></script><script src=/js/fastsearch.js></script>